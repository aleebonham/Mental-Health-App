{% extends "base.html" %}
{% block content %}
<h1>Students</h1>
<form method="GET">
    <label>Filter by City:</label>
    <input type="text" name="city" value="{{ city or '' }}">
    <button type="submit">Filter</button>
</form>
<table>
    <tr>
        <th>ID</th>
        <th>Gender</th>
        <th>Age</th>
        <th>City</th>
        <th>CGPA</th>
        <th>Depression</th>
    </tr>
    {% for student in pagination.items %}
    <tr>
        <td><a href="{{ url_for('main.student', id=student.id) }}">{{ student.id }}</a></td>
        <td>{{ student.gender }}</td>
        <td>{{ student.age }}</td>
        <td>{{ student.city }}</td>
        <td>{{ student.cgpa }}</td>
        <td>{{ 'Yes' if student.depression else 'No' }}</td>
    </tr>
    {% endfor %}
</table>
<div>
    {% if pagination.has_prev %}
        <a href="{{ url_for('main.students', page=pagination.prev_num, city=city) }}">Previous</a>
    {% endif %}
    {% for p in pagination.iter_pages() %}
        {% if p %}
            <a href="{{ url_for('main.students', page=p, city=city) }}">{{ p }}</a>
        {% else %}
            ...
        {% endif %}
    {% endfor %}
    {% if pagination.has_next %}
        <a href="{{ url_for('main.students', page=pagination.next_num, city=city) }}">Next</a>
    {% endif %}
</div>
{% endblock %}