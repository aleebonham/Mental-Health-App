{% extends 'base.html' %}
{% block content %}
<h2>Students</h2>
<form method="GET">
    <input type="text" name="city" placeholder="Filter by city">
    <button type="submit">Filter</button>
</form>
<table>
    <tr>
        <th>ID</th>
        <th>Gender</th>
        <th>Age</th>
        <th>City</th>
        <th>CGPA</th>
        <th>Depression</th>
    </tr>
    {% for student in students.items %}
    <tr>
        <td><a href="{{ url_for('main.student', id=student.id) }}">{{ student.id }}</a></td>
        <td>{{ student.gender }}</td>
        <td>{{ student.age }}</td>
        <td>{{ student.city }}</td>
        <td>{{ student.cgpa }}</td>
        <td>{{ 'Yes' if student.depression else 'No' }}</td>
    </tr>
    {% else %}
    <tr><td colspan="6">No students found</td></tr>
    {% endfor %}
</table>
{% if students.has_prev %}
<a href="{{ url_for('main.students', page=students.prev_num, city=request.args.get('city')) }}">Previous</a>
{% endif %}
{% if students.has_next %}
<a href="{{ url_for('main.students', page=students.next_num, city=request.args.get('city')) }}">Next</a>
{% endif %}
{% endblock %}